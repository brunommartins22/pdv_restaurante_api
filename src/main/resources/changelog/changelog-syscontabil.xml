<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    
    
    
    <changeSet id="1" author="adam"   runOnChange="true">        
        <sql splitStatements="true" dbms="postgresql">
            INSERT INTO 
            seguranca.sistema (id, dominio_grupo_sistema,nome_sistema)
            VALUES (1, 'SYSCONTABIL', 'SysContábil');
        </sql>
    </changeSet>
    
    
    <changeSet id="2" author="adam"   runOnChange="true">        
        <sql splitStatements="true" dbms="postgresql">
            INSERT INTO seguranca.permissao VALUES ('1.01', 'Cadastro de Cliente', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1', 'Cadastro', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.01.01', '     Incluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.01.02', '     Alterar', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.01.03', '     Excluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.02', 'Cadastro de Cidade', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.02.01', '     Incluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.02.02', '     Alterar', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.02.03', '     Excluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.03', 'Cadastro de Usuário', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.03.01', '     Incluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.03.02', '     Alterar', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.03.03', '     Excluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.03.04', '     Conceder Permissão', 'PROCESSO');
            INSERT INTO seguranca.permissao VALUES ('1.04', 'Cadastro de Empresa', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.04.01', '     Incluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.04.02', '     Alterar', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('1.04.03', '     Excluir', 'CADASTRO');
            INSERT INTO seguranca.permissao VALUES ('2', 'Processos', 'PROCESSO');
            INSERT INTO seguranca.permissao VALUES ('2.01', 'Regra de tributação', 'PROCESSO');
            INSERT INTO seguranca.permissao VALUES ('2.02', 'Produtos do Cliente', 'PROCESSO');
            INSERT INTO seguranca.permissao VALUES ('2.02.01', '     Excessão por NCM', 'PROCESSO');
            INSERT INTO seguranca.permissao VALUES ('2.02.02', '     Excessão por Produção', 'PROCESSO');
            INSERT INTO seguranca.permissao VALUES ('2.02.03', '     Confirmação de Item', 'PROCESSO');
        </sql>
    </changeSet>
    
    <changeSet id="3" author="adam"   runOnChange="true">        
        <sql splitStatements="true" dbms="postgresql">
            --
            -- TOC entry 2301 (class 0 OID 42598)
            -- Dependencies: 185
            -- Data for Name: permissao_sistema; Type: TABLE DATA; Schema: seguranca; Owner: interage
            --

            INSERT INTO seguranca.permissao_sistema VALUES (1, '1.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (2, '1', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (3, '1.01.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (4, '1.01.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (5, '1.01.03', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (6, '1.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (7, '1.02.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (8, '1.02.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (9, '1.02.03', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (10, '1.03', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (11, '1.03.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (12, '1.03.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (13, '1.03.03', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (14, '1.03.04', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (15, '1.04', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (16, '1.04.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (17, '1.04.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (18, '1.04.03', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (19, '2', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (20, '2.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (21, '2.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (22, '2.02.01', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (23, '2.02.02', 1);
            INSERT INTO seguranca.permissao_sistema VALUES (24, '2.02.03', 1);
        </sql>
    </changeSet>
    
    <changeSet id="4" author="syscontabil-bruno-joao" runOnChange="true">
        <sql splitStatements="true" dbms="postgresql">
            ALTER TABLE syscontabil.cliente
            ALTER COLUMN tipo_cliente TYPE seguranca."DominioTipoPessoa";
            
            ALTER TABLE syscontabil.cliente
            ALTER COLUMN tipo_cliente SET NOT NULL;
        </sql>
    </changeSet>
    
    <changeSet id="5" author="syscontabil-bruno-joao"   runOnChange="true">        
        <sql splitStatements="true" dbms="postgresql">
            CREATE DOMAIN syscontabil."DominioRegime"
            AS character varying(20)
            CONSTRAINT "DominioRegime" CHECK (value in ('LUCROPRESUMIDO','LUCROPRESUMIDO','SIMPLESNACIONAL'));
            ALTER DOMAIN syscontabil."DominioRegime"
            OWNER TO interage;
        </sql>
    </changeSet>
    
    <changeSet id="6" author="syscontabil-bruno-joao" runOnChange="true">
        <sql splitStatements="true" dbms="postgresql">
            ALTER TABLE syscontabil.cliente
            ALTER COLUMN tipo_regime TYPE syscontabil."DominioRegime";
        </sql>
    </changeSet>   
    
    
</databaseChangeLog>